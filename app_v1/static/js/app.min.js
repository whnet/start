(function(){window.iOSversion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var v=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(v[1],10),parseInt(v[2],10),parseInt(v[3]||0,10)];
}};window.initViewport=function(){var ver=iOSversion();if(ver&&ver[0]>=11){return;}var idaelViewport=window.screen?window.screen.width:$(window).width();
var visualViewport=375;var zoomView=idaelViewport/visualViewport;$('meta[name="viewport"]').attr("content","user-scalable=no, width="+visualViewport+"px, initial-scale="+zoomView+", minimum-scale="+zoomView+", maximum-scale="+zoomView+"");
};window.app={client:{iosNWX:"",ios:"",android:"http://a.app.qq.com/o/simple.jsp?pkgname="},baseURL:window.location.protocol+"//"+window.location.host,scoreRate:10,formatTime:function(fmt,time){var date=new Date(time);
var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),S:date.getMilliseconds()};
if(/(y+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length));}for(var k in o){if(new RegExp("("+k+")").test(fmt)){fmt=fmt.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)));
}}return fmt;},open:function(url,ios,callback,isClick){var _url;var unInstallCallBack=function(){if(Object.prototype.toString.call(callback)!="[object Function]"){if(app.getUa.ios){location.href=app.client.ios;
}else{location.href=app.client.android;}}else{callback();}};if(Object.prototype.toString.call(url)=="[object Object]"){if(app.getUa.ios){_url=url.ios;}else{if(app.getUa.android){_url=url.android;
}}}else{_url=url;}var openApp=function(){var iframe=document.createElement("iframe");iframe.style.display="none";iframe.src=_url;window.location.href=_url;
};if(app.getUa.weixin&&(function(){var ua=navigator.userAgent.toLowerCase();var re=/\(iphone; cpu iphone os ([\d\_]*) like mac os x\)/;var rs=ua.match(re);
if(rs){var version=+rs[1].split("_")[0];if(version>8){return false;}}return true;})()){app.getInstallStateInWeixin(function(){setTimeout(openApp,16);WeixinJSBridge.invoke("closeWindow",{},function(res){});
},_do);return false;}if(window.AliansBridge||app.getUa.coco){window.location.href=_url;return false;}window.location.href=_url;var t=false;setTimeout(function(){t=true;
if(app.getUa.ios){if(app.getUa.weixin){window.location.href=app.client.ios;}else{window.location.href=app.client.iosNWX;}}if(app.getUa.android){window.location.href=app.client.android;
}},1000);isClick=="click"&&setTimeout(function(){t&&window.location.reload();},2000);_do();},getInstallStateInWeixin:function(yes,no){var res={};var onBridgeReady=function(){WeixinJSBridge.invoke("getInstallState",{packageUrl:"wine://",packageName:"com.grape.wine"},function(e){if(e.err_msg.indexOf("get_install_state:yes")>-1){yes&&yes();
res.state="yes";return res;}else{no&&no();res.state="no";return res;}});};if(typeof WeixinJSBridge==="undefined"){document.addEventListener("WeixinJSBridgeReady",onBridgeReady,false);
res.state="notReady";return res;}else{onBridgeReady();}},call:function(opt){var action=opt.action||null;var callBack=opt.callback||opt.callBack||function(){};
var params=opt.params||[];if(!action){throw"没有调用的action";return false;}if(params&&Object.prototype.toString.call(params).toLowerCase()!="[object array]"){throw"参数集不是数组";
return false;}if(app.getUa.ios){var cocourl=["coco://365rili.com"];cocourl.push("/"+action);var staticFnRand="fn"+Math.ceil(app.random(1000000,9999999));
window[staticFnRand]=function(){if(window[staticFnRand]._exec>0){return;}window[staticFnRand]._exec++;callBack(arguments[0]);setTimeout(function(){delete window[staticFnRand];
for(var i=0;i<paramRandNameList.length;i++){delete window[paramRandNameList[i]];}},16);};window[staticFnRand]._exec=0;cocourl.push("?static="+staticFnRand);
var paramRandNameList=[];var paramRand;for(var i=0;i<params.length;i++){paramRand="p"+Math.ceil(app.random(1000000,9999999));window[paramRand]=params[i]["value"];
cocourl.push("&"+params[i]["name"]+"="+paramRand);paramRandNameList.push(paramRand);}cocourl=cocourl.join("");window.location.href=cocourl;}else{if(app.getUa.android){var args=[];
for(var i=0;i<params.length;i++){args.push(params[i]["value"]);}var _val=AliansBridge[action].apply(AliansBridge,args);callBack(_val);}}},coco:(navigator.userAgent.toLowerCase().match(/vino/gi)||[""])[0],version:(function(){if(!(navigator.userAgent.toLowerCase().match(/vino/gi)||[""])[0]){return 0;
}var ua=navigator.userAgent.toLowerCase().split("/");var vs=ua[ua.length-2];var ver=vs.split(".");return parseInt(ver.join(""));})(),random:function(n,m){return Math.random()*(m-n)+n;
},getUa:(function(){var sUserAgent=navigator.userAgent.toLowerCase();var bIsIpad=sUserAgent.match(/ipad/i)=="ipad";var bIsIphoneOs=sUserAgent.match(/iphone os/i)=="iphone os";
var bIsAndroid=sUserAgent.match(/android/i)=="android";var bIsWeixin=sUserAgent.match(/micromessenger/i)=="micromessenger";var bIsWeibo=sUserAgent.match(/weibo/i)=="weibo";
var bIsqq=sUserAgent.match(/qq/i)=="qq";var bIsIosCoco=sUserAgent.match(/ios-coco/i)=="ios-coco";var bIsAndroidCoco=sUserAgent.match(/android-coco/i)=="android-coco";
return{ipad:bIsIpad,iphone:bIsIphoneOs,android:bIsAndroid,weibo:bIsWeibo,weixin:bIsWeixin,qq:bIsqq,ios:bIsIphoneOs||bIsIpad,iosCoco:bIsIosCoco,androidCoco:bIsAndroidCoco,coco:bIsIosCoco||bIsAndroidCoco};
})(),query:function(name,href){var reg=new RegExp("(^|\\?|&)"+name+"=([^&^#]*)(\\s|&|#|$)","i");href=href||location.href;if(reg.test(href)){var res=decodeURIComponent(RegExp.$2.replace(/\+/g," "));
return res.replace(/\??10000skip=true/gi,"");}return"";},_hm:function(){window._hmt=window._hmt||[];var hm=document.createElement("script");switch(window.location.hostname){case"naonao.xfenyun.com":hm.src="//hm.baidu.com/hm.js?641590f77bae90d46b451aed2a8a0fdb";
break;}document.getElementsByTagName("head")[0].appendChild(hm);},template:function(s,o,defaults,opt,index){opt=opt||{autoProtocol:false};opt.index=opt.index||0;
if(typeOf(s)==="undefined"||typeOf(o)==="undefined"){return"";}var _html=[];defaults=defaults||{};if(typeOf(o)==="array"){for(var i=0,len=o.length;i<len;
i++){opt.index=i;_html.push(app.template(s,o[i],defaults,opt));}}else{var ___o;if({"[object string]":1,"[object number]":1,"[object boolean]":1}[Object.prototype.toString.call(o).toLowerCase()]){___o={index:opt.index+1,item:o};
}var __o={};copyTo(o,__o);apply(__o,defaults);_html.push(s.replace(/\{\$([^}]*)\}/g,function(_,_o){var pValue=__o,dValue=___o||o;for(var i=0,pS=_o.split(".");
i<pS.length;i++){pValue=pValue?pValue[pS[i]]:null;dValue=dValue?dValue[pS[i]]:null;}if(opt.autoProtocol){return typeOf(pValue)==="function"?pValue(app.toProtocol(dValue),___o||o,__o,opt.index):(app.toProtocol(app.returnNumOrStr(dValue))||app.toProtocol(app.returnNumOrStr(pValue))||"");
}return typeOf(pValue)==="function"?pValue(dValue,___o||o,__o,opt.index):(app.returnNumOrStr(dValue)||app.returnNumOrStr(pValue)||"");}));}return _html.join("");
},returnNumOrStr:function(o){return Object.prototype.toString.call(o).toLowerCase()==="[object number]"?(""+o):o;},toProtocol:function(val,protocol){if(Object.prototype.toString.call(val).toLowerCase()!=="[object string]"){return val;
}var _va=val.split("://");if(_va.length>=2){if(_va[0]==protocol){return val;}if(protocol){return[protocol,_va[1]].join("://");}else{var _protocol=window.location.protocol;
_protocol=_protocol.substr(0,_protocol.length-1);return[_protocol,_va[1]].join("://");}}else{return _va;}},connectWebViewJavascriptBridge:function(callback){if(window.WebViewJavascriptBridge){callback(window.WebViewJavascriptBridge);
}else{document.addEventListener("WebViewJavascriptBridgeReady",function(){callback(window.WebViewJavascriptBridge);},false);if(app.getUa.ios){if(window.WVJBCallbacks){window.WVJBCallbacks.push(callback);
}else{window.WVJBCallbacks=[callback];}}}},parseUrl:function(url,data){if(url){data=data||{};if(url.indexOf("?")>=0){var param=url.split("?")[1].split("&");
var _p=null;for(var i=0;i<param.length;i++){_p=param[i].split("=");try{data[_p[0]]=decodeURIComponent(_p[1]);}catch(e){data[_p[0]]=_p[1];}}}url=url.split("?")[0];
var _param=$.param(data);if(_param){url=url+"?"+_param;}}url=url||location.href;url=$.trim(url);if(url.indexOf("http")<0){url=app.baseURL+url;}return url;
},needToken:function(callback,url,data){callback=callback||function(){};url=app.parseUrl(url,data);if(app.coco){app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("signature",{url:url},function(response){callback(response,url);
});});}else{callback({},url);}},checkLogin:function(callBack){if(app.coco){return app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("signature",{url:location.href},function(response){app.isLogin=!!response["x-vino-http-key"];
callBack&&callBack();});});}app.isLogin=!!app.GetCookie("auto_naonao");callBack&&callBack();},needLogin:function(callback,url,data,backurl){backurl=backurl||"";
callback=callback||function(){};url=app.parseUrl(url,data);if(backurl&&backurl.indexOf("http")<0){backurl=$.trim(backurl);backurl=app.baseURL+backurl;}if(app.coco){app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("signature",{url:url},function(response){if(response["x-vino-http-key"]){callback(response,url);
}else{var data=backurl?{back:backurl}:{};bridge.callHandler("login",data,function(){});}});});}else{if(app.GetCookie("auto_naonao")){callback({},url);}else{if(app.getUa.weixin){window.location.href=app.baseURL+"/weixin/mp/login.do?redURL="+encodeURIComponent(backurl||window.location.href);
}else{app.tip("暂不支持非微信环境");}}}},handleBindMobileIfNeeded:function(data){if(typeof(data)==="string"){data=JSON.parse(data);}if(!data.bind_state&&data.type==="mobile"){var backurl=window.location.href;
window.location.href=app.baseURL+"/action/account/bind_mobile.html?back="+(backurl?encodeURIComponent(backurl):"");return true;}return false;},registForApp:function(name,fn){if(app.coco){app.connectWebViewJavascriptBridge(function(bridge){bridge.registerHandler(name,fn);
});}else{window[name]=fn;}},setCookie:function(name,value,expires,path,domain,secure){var today=new Date();today.setTime(today.getTime());if(expires){expires=expires*1000*60*60*24;
}var expires_date=new Date(today.getTime()+(expires));document.cookie=name+"="+encodeURIComponent(value)+((expires)?";expires="+expires_date.toGMTString():"")+((path)?";path="+path:"")+((domain)?";domain="+domain:"")+((secure)?";secure":"");
},deleteCookie:function(name,path,domain){if(this.GetCookie(name)){document.cookie=name+"="+((path)?";path="+path:"")+((domain)?";domain="+domain:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT";
}},GetCookie:function(name){var value=null;if(document.cookie&&document.cookie!=""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;
i++){var cookie=cookies[i].replace(/^\s+|\s+$/g,"");if(cookie.substring(0,name.length+1)==(name+"=")){value=decodeURIComponent(cookie.substring(name.length+1));
break;}}}return value;},tabBar:function(selectIdx){var titles=["首页","分类","购物车","二维码","推广中心"];var html='<div class="tabBar">'+app.template('<div class="tabBarItem"><a href="javascript:app.tabBarAction({$cid})"><img src="{$icon}">{$item}</a></div>',titles,{cid:function(o,p,d,i){return i;
},item:function(o,p,d,i){return i==selectIdx?'<p class="active">'+o+"</p>":"<p>"+o+"</p>";},icon:function(o,p,d,i){if(i==0){return i==selectIdx?"/images/tab_main_selected.png":"/images/tab_main.png";
}else{if(i==1){return i==selectIdx?"/images/tab_category_selected.png":"/images/tab_category.png";}else{if(i==2){return i==selectIdx?"/images/tab_cart_selected.png":"/images/tab_cart.png";
}else{if(i==3){return i==selectIdx?"/images/tab_qrcode_selected.png":"/images/tab_qrcode.png";}else{if(i==4){return i==selectIdx?"/images/tab_profile_selected.png":"/images/tab_profile.png";
}}}}}}})+"</div>";$(html).appendTo("body");$("body").addClass("showTabBar");},tabBarAction:function(idx){if(idx==0){window.location.href="/index.html";
}else{if(idx==1){window.location.href="/action/category/category.html";}else{if(idx==2){window.location.href="/action/cart/cart.html";}else{if(idx==3){window.location.href="/action/account/qrcode.html";
}else{if(idx==4){window.location.href="/action/download/download.html";}}}}}},fixCart:function(opt){opt=opt||{};var bottom=opt.bottom;app.getCss({href:app.baseURL+"/css/fixCart.css",callback:function(){var img=new Image();
img.onload=function(){$('<a style="'+(bottom?"bottom: "+bottom:"")+'" class="fixcart"><i class="icon-cart"></i><i class="icon-bottle"></i><label class="tag-status"></label></a>').appendTo("body");
if(app.coco){app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("signature",{url:"/cart/count.do"},function(response){if(response["x-vino-http-key"]){$.ajax({url:"/cart/count.do",dataType:"json",headers:response,success:function(data){if(data.state=="ok"){if(data.data.count){$(".tag-status").addClass("active");
$(".fixcart").addClass("active1");}}}});}setTimeout(function(){$(".fixcart").fadeIn(200);},300);});});$(".fixcart").on("tap",function(){app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("goToCart",{},function(response){});
});});}else{if(app.GetCookie("auto_naonao")){$.ajax({url:"/cart/count.do",dataType:"json",success:function(data){if(data.state=="ok"){if(data.data.count){$(".tag-status").addClass("active");
$(".fixcart").addClass("active1");}}}});}setTimeout(function(){$(".fixcart").fadeIn(200);},300);$(".fixcart").attr("data-url","/action/cart/cart.html");
}app.registForApp("updateCart",function(data){if(data.hasVine){if(!$(".fixcart").hasClass("active1")){$(".fixcart").addClass("active");}$(".tag-status").addClass("active");
}else{$(".tag-status").removeClass("active");$(".fixcart").removeClass("active");$(".fixcart").removeClass("active1");}});};img.src="/images/fixCart.png";
}});},formatCurrency:function(num){var reminder=num%100;var str="."+(reminder<10?"0":"")+reminder;if(reminder==0){str="";}num=num/100;num=num.toString().replace(/\$|\,/g,"");
if(isNaN(num)){num="0";}sign=(num==(num=Math.abs(num)));num=Math.floor(num*100+0.50000000001);num=Math.floor(num/100).toString();for(var i=0;i<Math.floor((num.length-(1+i))/3);
i++){num=num.substring(0,num.length-(4*i+3))+","+num.substring(num.length-(4*i+3));}return(((sign)?"":"-")+num)+str;},getScript:function(opt){var script=null,url=opt.url||"",data=opt.data||"",success=opt.success||function(data){},charset=opt.charset||"utf-8",datas=opt.datas||null,callback=opt.callback||function(){},noDel=opt.noDel||false,head=opt.head||document.body||document.getElementsByTagName("body")[0]||document.documentElement,_do=opt._do||"func";
if(url==""){return false;}var isJs=url.split(".")[url.split(".").length-1].toLowerCase()=="js";if(!isJs){if(typeof data=="object"){data=this.jsonToStr(data);
}var fnRand="c"+Math.ceil(common.random(1000000,9999999));eval(fnRand+" = "+success);url+=(url.indexOf("?")==-1?"?":"&")+data+(data==""?"":"&")+_do+"="+fnRand+"&d="+this.getDate();
}script=document.createElement("script");script.charset=charset;script.src=url;script.onload=script.onreadystatechange=function(){if(!script.readyState||/loaded|complete/.test(script.readyState)){callback(datas);
script.onload=script.onreadystatechange=null;if(!isJs&&url.split(".")[url.split(".").length-1].toLowerCase()!="flv"){if(!noDel){if(head&&script.parentNode){head.removeChild(script);
}eval("delete "+fnRand);}}script=undefined;}};head.appendChild(script);},getCss:function(opt){var link,href=opt.href||"",datas=opt.datas||null,callback=opt.callback||function(){};
var link=document.createElement("link");link.href=href;link.rel="stylesheet";var checkLink=function(){var _t=false;try{if(link.sheet&&link.sheet.cssRules.length>0){_t=true;
}else{if(link.styleSheet&&link.styleSheet.cssText.length>0){_t=true;}else{if(link.innerHTML&&link.innerHTML.length>0){_t=true;}}}}catch(ex){if(ex.name&&ex.name=="NS_ERROR_DOM_SECURITY_ERR"){_t=true;
}}if(t){clearInterval(t);callback(datas);}};$(link).appendTo("head");checkLink();var t=setInterval(checkLink,200);},footer:function(opt){if(app.coco){return false;
}var txt=opt.txt||"下载葡萄客户端，注册即享20元礼券！";var position=opt.position||"bottom";$("body").removeClass("footerTop, footerBottom").addClass("footer"+position);
app.getCss({href:app.baseURL+"/css/footer.css",callback:function(){var img=new Image();img.onload=function(){var tmpl=$('<div class="___footer"><a href="javascript:;" class="footer_down_btn"><img src="/images/footerLogo.png" width="43" alt="" /><span>'+txt+"</span></a></div>");
$("body").append(tmpl);var btn=$(".footer_down_btn");btn.on("tap",function(){if(app.getUa.ios){window.location.href=app.client.ios;}if(app.getUa.android){window.location.href=app.client.android;
}});};img.src="/images/footerLogo.png";}});},changeTitle:function(title){var $body=$("body");document.title=title;if(app.getUa.ios){var $iframe=$("<iframe src='/images/iframe-use.png' style='display:none;'></iframe>");
$iframe.on("load",function(){setTimeout(function(){$iframe.off("load").remove();},0);}).appendTo($body);}},wxmsgOnly:function(wx){wx.hideOptionMenu();wx.showMenuItems({menuList:["menuItem:share:timeline"]});
},weixinJSInit:function(){app.weixinStatus=true;app.weixin();},weixin:function(data){if(!app.getUa.weixin){return;}if(!data&&app.weixinData){wx.showOptionMenu();
wxProtocol.init(app.weixinData);}else{app.weixinData=data;if(app.weixinStatus){wx.showOptionMenu();wxProtocol.init(app.weixinData);app.weixinData=null;
}}},setAppFn:function(name,fn){fn=fn||function(){};app.registForApp(name,fn);},getWN:function(name){var _data=JSON.parse(window.name);return _data[name]||"";
},setWN:function(name,data){var _data=JSON.parse(window.name);_data[name]=data;window.name=JSON.stringify(_data);},tip:function(text,opt){opt=opt||{};window.appTipMar=window.appTipMar||0;
clearTimeout(window.appTipMar);if($(".appNotice").length){if(opt.top){$(".appNotice").css({top:opt.top,bottom:"auto"});}else{$(".appNotice")[0].removeAttribute("style");
}$(".appNotice").html('<div style="margin: 0 10px;text-align:center;">'+text+"</div>");window.appTipMar=setTimeout(function(){$(".appNotice").fadeOut("fast",function(){$(this).remove();
});},opt.time||3000);return;}$('<div class="appNotice"><div style="margin: 0 10px;text-align:center;">'+text+"</div></div>").appendTo("body");if(opt.top){$(".appNotice").css({top:opt.top,bottom:"auto"});
}window.appTipMar=setTimeout(function(){$(".appNotice").fadeOut("fast",function(){$(this).remove();});},opt.time||3000);},noScrollTop:0,noScroll:function(){app.noScrollTop=$(window).scrollTop();
app.noScrollTop==0&&app.noScrollTop++;$("html").css("overflow","hidden");$(window).scrollTop(app.noScrollTop);$(window).on("touchmove.appe",stopDefault);
},scroll:function(){$("html").css("overflow","");$(window).scrollTop(app.noScrollTop);$(window).off(".appe");},showLoading:function(){app.noScroll();$('<div class="submitMask"></div><img class="submitting" src="/images/loading.gif" width="80">').appendTo("body");
},clearLoading:function(){app.scroll();$(".submitMask, .submitting").remove();},browser:function(url){var href=url;if(href.indexOf("http")<0){href=app.baseURL+href;
}if(app.coco){return app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("browser",{url:href},function(response){});});}window.location.href=href;
},disablePullRefresh:function(){if(app.coco){app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("enableRefresh",{enable:false},function(response){});
});}},needReload:function(){if(app.GetCookie("needReload")){return false;}app.setCookie("needReload",window.location.href,0,"/");},hideShare:function(){if(app.coco){app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("rightBarStyle",{style:""},function(response){});
});}else{app.weixin(function(wx,link){wx.hideOptionMenu();});}},setShareAll:function(share){if(app.coco){var setData={desc:share.desc,imgUrl:share.picUrl,link:share.linkUrl,title:share.title,circle:share.circle||share.title};
if(share.copy){setData.copy=true;}if(share.clipData){setData.clipData=share.clipData;}app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("rightBarStyle",{style:"share"},function(response){});
});app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("setShareData",setData,function(response){});});}else{app.weixin(function(wx,link){wx.showOptionMenu();
wx.onMenuShareAppMessage({title:share.title,desc:share.desc,link:share.linkUrl,imgUrl:share.picUrl,success:function(){updateShareStatus();}});wx.onMenuShareTimeline({title:share.circle||share.title,link:share.linkUrl,imgUrl:share.picUrl,success:function(){updateShareStatus();
}});});}},close:function(all){all=all||false;if(app.coco){app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("closeWebview",{all:all},function(response){});
});}else{if(app.getUa.weixin){app.weixin(function(wx){wx.closeWindow();});}else{window.close();}}},addDownloadAppBannerIfNeeded:function(isIndex){if(!app.coco){if(isIndex){$('<div class="download-banner"><img width="100%" src="/images/download_banner.jpg"></div>').prependTo(".bar");
$(".index").css("padding-top","95px");}else{var tag=$($("body").children().get(0));$('<div class="download-banner" style="height: 45px; position: fixed; z-index: 100;"><img width="100%" src="/images/download_banner.jpg"></div>').prependTo("body");
tag.css("padding-top","45px");}$(".download-banner").on("tap",function(){if(app.getUa.ios){if(app.getUa.weixin){window.location.href=app.client.ios;}else{window.location.href=app.client.iosNWX;
}}window.location.href=app.client.android;});}},loadResource:function(_data,_callback){function loadImage(src){var loadNum=this.loadNum||0;var img=new Image;
img.onload=loadSuccess;img.onerror=loadFailed;img.src=src;img.loadNum=++loadNum;}function loadSuccess(){img_len--;if(img_len==0){setTimeout(function(){if($.type(_callback)=="function"){_callback();
}},200);}}function loadFailed(){if(this.loadNum>data.length-2){return loadSuccess();}loadImage.call(this,this.src);}var data=["/images/loading.gif"];data=data.concat(_data||[]);
var img_len=data.length;for(var i=0;i<data.length;i++){loadImage(data[i]);}}};(function(){try{var scrollStatus=false;var tapStatus=true;var scrollMar=0;
$(document).on("touchstart.global","[data-url]",function(){if(scrollStatus){tapStatus=false;}else{tapStatus=true;}}).on("tap","[data-url]",function(){if(!tapStatus){return false;
}var _this=$(this);var href=_this.data("url");var hmtParam=_this.data("hmtparam")||"";if(hmtParam){hmtParam=hmtParam.split(",");hmtParam.unshift("_trackEvent");
try{_hmt.push(hmtParam);}catch(e){}}if(href.indexOf("http")<0){href=app.baseURL+href;}if(app.coco){return app.connectWebViewJavascriptBridge(function(bridge){bridge.callHandler("browser",{url:href},function(response){});
});}window.location.href=href;}).on("touchend.global","[data-url]",function(e){e.stopPropagation();e.preventDefault();});$(window).on("scroll.global",function(){clearTimeout(scrollMar);
scrollStatus=true;scrollMar=setTimeout(function(){scrollStatus=false;},100);});}catch(e){}})();function copyTo(ce,e){for(var i in ce){if(typeof i==="undefined"){continue;
}if(typeof ce[i]=="object"){e[i]={};if(ce[i] instanceof Array){e[i]=[];}copyTo(ce[i],e[i]);continue;}e[i]=ce[i];}}function apply(object,config,defaults){if(defaults){apply(object,defaults);
}if(object&&config&&typeof config==="object"){var i,j;for(i in config){object[i]=config[i];}}return object;}function typeOf(o){return/^\[object (.*)\]$/.exec(Object.prototype.toString.call(o).toLowerCase())[1];
}function stopDefault(e){if(e.target.tagName.toLowerCase()=="a"){return;}if(e&&e.preventDefault){e.preventDefault();}else{window.event.returnValue=false;
}return false;}if(app.query("forcelogin")==1&&app.getUa.weixin){setTimeout(app.needLogin,1000);}(function(){if(app.getUa.weixin){return require("/js/share/jweixin-1.0.0.js",function(){require("/js/share/weixin_1.0.min.js",function(){app.weixinJSInit();
});});}var WVJBIframe=null;if(app.coco){WVJBIframe=document.createElement("iframe");WVJBIframe.style.display="none";WVJBIframe.src="wvjbscheme://__BRIDGE_LOADED__";
document.documentElement.appendChild(WVJBIframe);setTimeout(function(){document.documentElement.removeChild(WVJBIframe);},1000);}function require(url,onload){var doc=document;
var head=doc.head||(doc.getElementsByTagName("head")[0]||doc.documentElement);var node=doc.createElement("script");node.onload=onload;node.onerror=function(){};
node.async=true;node.src=url;head.appendChild(node);}})();app.registForApp("shareCallback",function(){});app.checkLogin();typeof $!=="undefined"?$(app._hm):app._hm();
(function(){if(window.DeviceMotionEvent){window.addEventListener("devicemotion",handleReload,false);}else{handleReload();}function handleReload(){var reloadUrl=app.GetCookie("needReload");
if(reloadUrl&&reloadUrl!=window.location.href){app.setCookie("needReload","1","-1","/");setTimeout(function(){window.location.reload(true);},100);}}})();
(function(){if(typeof WeixinJSBridge=="object"&&typeof WeixinJSBridge.invoke=="function"){handleFontSize();}else{if(document.addEventListener){document.addEventListener("WeixinJSBridgeReady",handleFontSize,false);
}else{if(document.attachEvent){document.attachEvent("WeixinJSBridgeReady",handleFontSize);document.attachEvent("onWeixinJSBridgeReady",handleFontSize);
}}}function handleFontSize(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0});WeixinJSBridge.on("menu:setfont",function(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0});
});}})();initViewport();})();